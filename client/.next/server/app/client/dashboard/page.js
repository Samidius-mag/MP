(()=>{var e={};e.id=281,e.ids=[281],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},8220:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>x,routeModule:()=>u,tree:()=>c});var a=t(482),r=t(9108),l=t(2563),i=t.n(l),d=t(8300),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(s,n);let c=["",{children:["client",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1170)),"/home/samidius/MP/client/app/client/dashboard/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,4697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,8762)),"/home/samidius/MP/client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,4697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],x=["/home/samidius/MP/client/app/client/dashboard/page.tsx"],o="/client/dashboard/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/client/dashboard/page",pathname:"/client/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7616:(e,s,t)=>{Promise.resolve().then(t.bind(t,4221))},4221:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var a=t(5344),r=t(3729),l=t(2254),i=t(8779),d=t(8117),n=t(2169);let c=r.forwardRef(function({title:e,titleId:s,...t},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?r.createElement("title",{id:s},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});var x=t(7850);let o=r.forwardRef(function({title:e,titleId:s,...t},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?r.createElement("title",{id:s},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))});var m=t(7902),u=t(4122),h=t(4481);function p(){let e=(0,l.useRouter)(),[s,t]=(0,r.useState)(null),[p,g]=(0,r.useState)([]),[j,b]=(0,r.useState)(0),[N,v]=(0,r.useState)(!0);(0,r.useEffect)(()=>{y()},[]);let y=async()=>{try{let[e,s,a]=await Promise.all([d.h.get("/client/stats"),d.h.get("/client/orders?limit=5"),d.h.get("/client/balance")]);t(e.data),g(s.data.orders),b(a.data.balance)}catch(e){console.error("Error fetching dashboard data:",e)}finally{v(!1)}},f=e=>{let s={new:{label:"Новый",className:"badge-info"},in_assembly:{label:"В сборке",className:"badge-warning"},ready_to_ship:{label:"Готов к отправке",className:"badge-warning"},shipped:{label:"Отправлен",className:"badge-success"},delivered:{label:"Доставлен",className:"badge-success"},cancelled:{label:"Отменен",className:"badge-danger"}}[e]||{label:e,className:"badge-gray"};return a.jsx("span",{className:`badge ${s.className}`,children:s.label})},w=e=>({wildberries:"Wildberries",ozon:"Ozon",yandex_market:"Яндекс.Маркет"})[e]||e,S=e=>{let s={FBS:{label:"FBS",className:"badge-primary",description:"Fulfillment by Seller"},DBW:{label:"DBW",className:"badge-success",description:"Delivery by Wildberries"},DBS:{label:"DBS",className:"badge-warning",description:"Delivery by Seller"}}[e]||{label:e,className:"badge-gray",description:""};return a.jsx("span",{className:`badge ${s.className}`,title:s.description,children:s.label})},_=()=>s?.ordersByStatus?{new:s.ordersByStatus.new||0,in_assembly:(s.ordersByStatus.in_assembly||0)+(s.ordersByStatus.ready_to_ship||0),shipped:(s.ordersByStatus.shipped||0)+(s.ordersByStatus.delivered||0)}:{new:0,in_assembly:0,shipped:0},k=s=>{e.push(`/client/orders?status=${s}`)};return N?a.jsx(i.Z,{requiredRole:"client",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}):a.jsx(i.Z,{requiredRole:"client",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Дашборд"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Обзор ваших заказов и статистики"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(n.Z,{className:"h-8 w-8 text-primary-600"})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Всего заказов"}),a.jsx("dd",{className:"text-lg font-medium text-gray-900",children:s?.totalOrders||0})]})})]})})}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(c,{className:"h-8 w-8 text-green-600"})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Общая сумма"}),(0,a.jsxs)("dd",{className:"text-lg font-medium text-gray-900",children:[s?.totalAmount?.toLocaleString("ru-RU")||0," ₽"]})]})})]})})}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(x.Z,{className:"h-8 w-8 text-blue-600"})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Баланс депозита"}),(0,a.jsxs)("dd",{className:"text-lg font-medium text-gray-900",children:[j.toLocaleString("ru-RU")," ₽"]})]})})]})})}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(o,{className:"h-8 w-8 text-purple-600"})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"За сегодня"}),a.jsx("dd",{className:"text-lg font-medium text-gray-900",children:s?.recentOrders||0})]})})]})})})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"card-header",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Статусы заказов"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Распределение заказов по текущему статусу"})]}),a.jsx("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3",children:[(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-lg bg-blue-50 px-4 py-5 shadow sm:px-6 sm:py-6 cursor-pointer hover:bg-blue-100 transition-colors",onClick:()=>k("new"),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(m.Z,{className:"h-8 w-8 text-blue-600"})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-blue-600 truncate",children:"Новые заказы"}),a.jsx("dd",{className:"text-2xl font-bold text-blue-900",children:_().new})]})})]}),a.jsx("div",{className:"mt-4",children:a.jsx("div",{className:"text-sm text-blue-600",children:"Требуют обработки"})}),a.jsx("div",{className:"absolute top-4 right-4",children:a.jsx("div",{className:"text-xs text-blue-500 font-medium",children:"Нажмите для просмотра →"})})]}),(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-lg bg-yellow-50 px-4 py-5 shadow sm:px-6 sm:py-6 cursor-pointer hover:bg-yellow-100 transition-colors",onClick:()=>k("in_assembly"),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(u.Z,{className:"h-8 w-8 text-yellow-600"})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-yellow-600 truncate",children:"На сборке"}),a.jsx("dd",{className:"text-2xl font-bold text-yellow-900",children:_().in_assembly})]})})]}),a.jsx("div",{className:"mt-4",children:a.jsx("div",{className:"text-sm text-yellow-600",children:"В процессе сборки"})}),a.jsx("div",{className:"absolute top-4 right-4",children:a.jsx("div",{className:"text-xs text-yellow-500 font-medium",children:"Нажмите для просмотра →"})})]}),(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-lg bg-green-50 px-4 py-5 shadow sm:px-6 sm:py-6 cursor-pointer hover:bg-green-100 transition-colors",onClick:()=>k("shipped"),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(h.Z,{className:"h-8 w-8 text-green-600"})}),a.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[a.jsx("dt",{className:"text-sm font-medium text-green-600 truncate",children:"В доставке"}),a.jsx("dd",{className:"text-2xl font-bold text-green-900",children:_().shipped})]})})]}),a.jsx("div",{className:"mt-4",children:a.jsx("div",{className:"text-sm text-green-600",children:"Отправлены или доставлены"})}),a.jsx("div",{className:"absolute top-4 right-4",children:a.jsx("div",{className:"text-xs text-green-500 font-medium",children:"Нажмите для просмотра →"})})]})]})})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Последние заказы"})}),a.jsx("div",{className:"card-body",children:p.length>0?a.jsx("div",{className:"space-y-4",children:p.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("h4",{className:"text-lg font-medium text-gray-900",children:["#",e.marketplace_order_id]}),a.jsx("span",{className:"text-sm text-gray-500",children:w(e.marketplace)}),e.order_type&&S(e.order_type),f(e.status)]}),a.jsx("div",{className:"text-right",children:a.jsx("p",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("ru-RU")})})]}),e.items&&e.items.length>0&&a.jsx("div",{className:"mt-3",children:a.jsx("div",{className:"space-y-2",children:e.items.map((e,s)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx("span",{className:"font-medium text-gray-900",children:e.article}),e.assignmentId&&(0,a.jsxs)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["ID: ",e.assignmentId]}),e.orderType&&a.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:e.orderType})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:[a.jsx("div",{className:"font-medium",children:e.name}),e.subject&&e.subject!==e.name&&(0,a.jsxs)("div",{className:"text-gray-600",children:["Категория: ",e.subject]}),e.brand&&(0,a.jsxs)("div",{className:"text-gray-600",children:["Бренд: ",e.brand]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm",children:(0,a.jsxs)("span",{className:"text-gray-600",children:[e.quantity," шт. \xd7 ",e.priceFormatted||e.price.toLocaleString("ru-RU")," ₽"]})}),(0,a.jsxs)("div",{className:"font-medium text-gray-900",children:["= ",e.totalPriceFormatted||e.totalPrice.toLocaleString("ru-RU")," ₽"]})]})]}),(e.supplierStatus||e.wbStatus)&&a.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"text-xs space-y-1",children:[e.supplierStatus&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-gray-500",children:"Статус сборки:"}),a.jsx("span",{className:`px-2 py-1 rounded text-xs ${"new"===e.supplierStatus?"bg-blue-100 text-blue-800":"confirm"===e.supplierStatus?"bg-yellow-100 text-yellow-800":"complete"===e.supplierStatus?"bg-green-100 text-green-800":"cancel"===e.supplierStatus?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:e.supplierStatusText||e.supplierStatus})]}),e.wbStatus&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-gray-500",children:"Статус WB:"}),a.jsx("span",{className:`px-2 py-1 rounded text-xs ${"waiting"===e.wbStatus?"bg-yellow-100 text-yellow-800":"sorted"===e.wbStatus?"bg-blue-100 text-blue-800":"sold"===e.wbStatus?"bg-green-100 text-green-800":"ready_for_pickup"===e.wbStatus?"bg-green-100 text-green-800":e.wbStatus.includes("cancel")?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:e.wbStatusText||e.wbStatus})]})]})})]},s))})})]},e.id))}):(0,a.jsxs)("div",{className:"text-center py-6",children:[a.jsx(n.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Нет заказов"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"У вас пока нет заказов. Настройте интеграцию с маркетплейсами."})]})})]})]})})}},1170:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let a=(0,t(6843).createProxy)(String.raw`/home/samidius/MP/client/app/client/dashboard/page.tsx`),{__esModule:r,$$typeof:l}=a,i=a.default},7902:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});var a=t(3729);let r=a.forwardRef(function({title:e,titleId:s,...t},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},t),e?a.createElement("title",{id:s},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[456,472,898,783,838],()=>t(8220));module.exports=a})();