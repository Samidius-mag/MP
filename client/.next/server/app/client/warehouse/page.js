(()=>{var e={};e.id=798,e.ids=[798],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},7870:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>c});var s=r(482),a=r(9108),i=r(2563),n=r.n(i),l=r(8300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["client",{children:["warehouse",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,630)),"/home/samidius/MP/client/app/client/warehouse/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,4697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,8762)),"/home/samidius/MP/client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,4697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/samidius/MP/client/app/client/warehouse/page.tsx"],m="/client/warehouse/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/client/warehouse/page",pathname:"/client/warehouse",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7442:(e,t,r)=>{Promise.resolve().then(r.bind(r,9954))},9954:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(5344),a=r(3729),i=r(8779),n=r(8117),l=r(3759),o=r(5965),c=r(4314);let d=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});function m(){let[e,t]=(0,a.useState)([]),[r,m]=(0,a.useState)(!0),[u,x]=(0,a.useState)(""),[p,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)({name:"",barcode:"",purchase_price:0,stock:0});(0,a.useEffect)(()=>{b()},[]);let b=async()=>{try{m(!0);let e=await n.h.get("/warehouse",{params:{search:u}});t(e.data.items||[])}catch(e){console.error("Error fetching warehouse items:",e)}finally{m(!1)}},y=async r=>{r.preventDefault();try{let r=await n.h.post("/warehouse",g);t([r.data.item,...e]),f({name:"",barcode:"",purchase_price:0,stock:0}),h(!1)}catch(e){console.error("Error adding item:",e),alert("Ошибка при добавлении товара")}},v=e=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0,maximumFractionDigits:2}).format(e),j=e=>new Date(e).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return s.jsx(i.Z,{requiredRole:"client",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Склад"}),s.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Управление товарами на складе"})]}),(0,s.jsxs)("button",{onClick:()=>h(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[s.jsx(l.Z,{className:"w-4 h-4 mr-2"}),"Добавить товар"]})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),b()},className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(o.Z,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",placeholder:"Поиск по названию или штрих-коду...",value:u,onChange:e=>x(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),s.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Найти"})]}),p&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,s.jsxs)("div",{className:"mt-3",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Добавить товар"}),(0,s.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Наименование *"}),s.jsx("input",{type:"text",required:!0,value:g.name,onChange:e=>f({...g,name:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Штрих-код"}),s.jsx("input",{type:"text",value:g.barcode,onChange:e=>f({...g,barcode:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Цена закупа *"}),s.jsx("input",{type:"number",step:"0.01",min:"0",required:!0,value:g.purchase_price,onChange:e=>f({...g,purchase_price:parseFloat(e.target.value)||0}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Остаток"}),s.jsx("input",{type:"number",min:"0",value:g.stock,onChange:e=>f({...g,stock:parseInt(e.target.value)||0}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Отмена"}),s.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Добавить"})]})]})]})})}),s.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:r?(0,s.jsxs)("div",{className:"p-6 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Загрузка..."})]}):0===e.length?(0,s.jsxs)("div",{className:"p-6 text-center",children:[s.jsx(c.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Нет товаров"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:u?"По вашему запросу ничего не найдено":"Начните с добавления товара на склад"})]}):s.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(e=>s.jsx("li",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),s.jsx("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.stock>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:["Остаток: ",e.stock]})})]}),(0,s.jsxs)("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500",children:[e.barcode&&(0,s.jsxs)("span",{children:["ШК: ",e.barcode]}),(0,s.jsxs)("span",{children:["Цена закупа: ",v(e.purchase_price)]}),(0,s.jsxs)("span",{children:["Обновлено: ",j(e.updated_at)]})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",title:"Редактировать остаток (только оператор)",disabled:!0,children:s.jsx(d,{className:"w-4 h-4"})})})]})},e.id))})}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:(0,s.jsxs)("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Информация о складе"}),s.jsx("div",{className:"mt-2 text-sm text-blue-700",children:(0,s.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Товары с указанным штрих-кодом будут автоматически сопоставляться с заказами Wildberries"}),s.jsx("li",{children:"При поступлении заказа с совпадающим штрих-кодом с депозита будет списана цена закупа"}),s.jsx("li",{children:"Редактирование остатков доступно только операторам и администраторам"})]})})]})]})})]})})}},630:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let s=(0,r(6843).createProxy)(String.raw`/home/samidius/MP/client/app/client/warehouse/page.tsx`),{__esModule:a,$$typeof:i}=s,n=s.default},5965:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(3729);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))})},3759:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(3729);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[456,472,898,783,85],()=>r(7870));module.exports=s})();