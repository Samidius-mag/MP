(()=>{var e={};e.id=8,e.ids=[8],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},6896:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>p,tree:()=>c});var t=a(482),i=a(9108),r=a(2563),l=a.n(r),n=a(8300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let c=["",{children:["client",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3613)),"/home/samidius/MP/client/app/client/settings/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,4697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,8762)),"/home/samidius/MP/client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,4697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["/home/samidius/MP/client/app/client/settings/page.tsx"],m="/client/settings/page",x={require:a,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/client/settings/page",pathname:"/client/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8354:(e,s,a)=>{Promise.resolve().then(a.bind(a,6709))},6709:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>p});var t=a(5344),i=a(3729),r=a(8779),l=a(843),n=a(8117),d=a(4669),c=a(708),o=a(3952);let m=i.forwardRef(function({title:e,titleId:s,...a},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},a),e?i.createElement("title",{id:s},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}),x=i.forwardRef(function({title:e,titleId:s,...a},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},a),e?i.createElement("title",{id:s},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))});function p(){let{user:e,updateProfile:s}=(0,l.useAuth)(),[a,p]=(0,i.useState)("profile"),[u,h]=(0,i.useState)(!1),[y,j]=(0,i.useState)({wildberries:{api_key:""},ozon:{api_key:"",client_id:""},yandex_market:{api_key:""},sima_land:{token:""}}),{register:b,handleSubmit:N,setValue:g}=(0,c.cI)(),{register:v,handleSubmit:_,setValue:f}=(0,c.cI)();(0,i.useEffect)(()=>{e&&(g("firstName",e.firstName||""),g("lastName",e.lastName||""),g("phone",e.phone||""),g("companyName",e.companyName||""),g("inn",e.inn||""),g("address",e.address||""))},[e,g]),(0,i.useEffect)(()=>{k()},[]);let k=async()=>{try{console.log("Fetching API keys...");let e=await n.h.get("/client/api-keys");console.log("Raw response:",e.data);let s=e.data.apiKeys||{};console.log("Fetched API keys:",s);let a={wildberries:{api_key:""},ozon:{api_key:"",client_id:""},yandex_market:{api_key:""},sima_land:{token:""}},t={wildberries:s.wildberries?.api_key&&""!==s.wildberries.api_key.trim()?s.wildberries:a.wildberries,ozon:s.ozon?.api_key&&""!==s.ozon.api_key.trim()?s.ozon:a.ozon,yandex_market:s.yandex_market?.api_key&&""!==s.yandex_market.api_key.trim()?s.yandex_market:a.yandex_market,sima_land:s.sima_land?.token&&""!==s.sima_land.token.trim()?s.sima_land:a.sima_land};console.log("Merged API keys:",t),j(t),f("wildberries",t.wildberries),f("ozon",t.ozon),f("yandex_market",t.yandex_market),f("sima_land",t.sima_land)}catch(s){console.error("Error fetching API keys:",s);let e={wildberries:{api_key:""},ozon:{api_key:"",client_id:""},yandex_market:{api_key:""},sima_land:{token:""}};j(e),f("wildberries",e.wildberries),f("ozon",e.ozon),f("yandex_market",e.yandex_market),f("sima_land",e.sima_land)}},w=async e=>{h(!0);try{await s(e),d.default.success("Профиль обновлен успешно")}catch(e){d.default.error(e.message)}finally{h(!1)}},P=async(e,s)=>{h(!0);try{await n.h.put("/client/api-keys",{[e]:s}),d.default.success(`API ключ ${e} обновлен успешно`),j(a=>({...a,[e]:s}))}catch(s){d.default.error(`Ошибка обновления API ключа ${e}`)}finally{h(!1)}},z=[{id:"profile",name:"Профиль",icon:o.Z},{id:"company",name:"Компания",icon:m},{id:"api",name:"API ключи",icon:x}];return t.jsx(r.Z,{requiredRole:"client",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Настройки"}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Управление профилем и настройками интеграций"})]}),(0,t.jsxs)("div",{className:"flex space-x-8",children:[t.jsx("div",{className:"w-64",children:t.jsx("nav",{className:"space-y-1",children:z.map(e=>(0,t.jsxs)("button",{onClick:()=>p(e.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md ${a===e.id?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[t.jsx(e.icon,{className:"w-5 h-5 mr-3"}),e.name]},e.id))})}),(0,t.jsxs)("div",{className:"flex-1",children:["profile"===a&&(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Личная информация"})}),t.jsx("div",{className:"card-body",children:(0,t.jsxs)("form",{onSubmit:N(w),className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"label",children:"Имя *"}),t.jsx("input",{...b("firstName",{required:"Имя обязательно"}),type:"text",className:"input",placeholder:"Введите ваше имя"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"label",children:"Фамилия *"}),t.jsx("input",{...b("lastName",{required:"Фамилия обязательна"}),type:"text",className:"input",placeholder:"Введите вашу фамилию"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"label",children:"Телефон"}),t.jsx("input",{...b("phone"),type:"tel",className:"input",placeholder:"+7 (999) 123-45-67"})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"submit",disabled:u,className:"btn-primary",children:u?"Сохранение...":"Сохранить"})})]})})]}),"company"===a&&(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Информация о компании"})}),t.jsx("div",{className:"card-body",children:(0,t.jsxs)("form",{onSubmit:N(w),className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"label",children:"Название компании"}),t.jsx("input",{...b("companyName"),type:"text",className:"input",placeholder:"Введите название компании"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"label",children:"ИНН"}),t.jsx("input",{...b("inn"),type:"text",className:"input",placeholder:"Введите ИНН",maxLength:12})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"label",children:"Адрес"}),t.jsx("textarea",{...b("address"),rows:3,className:"input",placeholder:"Введите адрес компании"})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"submit",disabled:u,className:"btn-primary",children:u?"Сохранение...":"Сохранить"})})]})})]}),"api"===a&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Wildberries"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Настройка интеграции с Wildberries"})]}),t.jsx("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"label",children:"API ключ"}),t.jsx("input",{...v("wildberries.api_key"),type:"password",className:"input",placeholder:"Введите API ключ Wildberries",autoComplete:"new-password",value:y.wildberries?.api_key||"",onChange:e=>{j(s=>({...s,wildberries:{...s.wildberries,api_key:e.target.value}}))}}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Получите API ключ в личном кабинете Wildberries"})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"button",onClick:()=>P("wildberries",y.wildberries),disabled:u,className:"btn-primary",children:u?"Сохранение...":"Сохранить Wildberries"})})]})})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Ozon"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Настройка интеграции с Ozon"})]}),t.jsx("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"label",children:"API ключ"}),t.jsx("input",{...v("ozon.api_key"),type:"password",className:"input",placeholder:"Введите API ключ Ozon",autoComplete:"new-password",value:y.ozon?.api_key||"",onChange:e=>{j(s=>({...s,ozon:{...s.ozon,api_key:e.target.value}}))}}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Получите API ключ в личном кабинете Ozon"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"label",children:"Client ID"}),t.jsx("input",{...v("ozon.client_id"),type:"text",className:"input",placeholder:"Введите Client ID Ozon",autoComplete:"off",value:y.ozon?.client_id||"",onChange:e=>{j(s=>({...s,ozon:{...s.ozon,client_id:e.target.value}}))}}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Получите Client ID в личном кабинете Ozon"})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"button",onClick:()=>P("ozon",y.ozon),disabled:u,className:"btn-primary",children:u?"Сохранение...":"Сохранить Ozon"})})]})})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Яндекс.Маркет"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Настройка интеграции с Яндекс.Маркет"})]}),t.jsx("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"label",children:"API ключ"}),t.jsx("input",{...v("yandex_market.api_key"),type:"password",className:"input",placeholder:"Введите API ключ Яндекс.Маркет",autoComplete:"new-password",value:y.yandex_market?.api_key||"",onChange:e=>{j(s=>({...s,yandex_market:{...s.yandex_market,api_key:e.target.value}}))}}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Получите API ключ в личном кабинете Яндекс.Маркет"})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"button",onClick:()=>P("yandex_market",y.yandex_market),disabled:u,className:"btn-primary",children:u?"Сохранение...":"Сохранить Яндекс.Маркет"})})]})})]}),e?.email!=="test+deposit@example.com"&&(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"СИМА ЛЕНД"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Настройка интеграции с поставщиком СИМА ЛЕНД"})]}),t.jsx("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"label",children:"Токен API"}),t.jsx("input",{...v("sima_land.token"),type:"password",className:"input",placeholder:"Введите токен API СИМА ЛЕНД",autoComplete:"new-password",value:y.sima_land?.token||"",onChange:e=>{j(s=>({...s,sima_land:{...s.sima_land,token:e.target.value}}))}}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Получите API токен в личном кабинете на сайте sima-land.ru"})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"button",onClick:()=>P("sima_land",y.sima_land),disabled:u,className:"btn-primary",children:u?"Сохранение...":"Сохранить СИМА ЛЕНД"})})]})})]})]})]})]})]})})}},3613:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>r,__esModule:()=>i,default:()=>l});let t=(0,a(6843).createProxy)(String.raw`/home/samidius/MP/client/app/client/settings/page.tsx`),{__esModule:i,$$typeof:r}=t,l=t.default}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[456,472,898,783,708,838],()=>a(6896));module.exports=t})();