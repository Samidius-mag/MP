# Инструкция по установке плагина ServerAuthShop

## ⚠️ ВАЖНО: Переход на Paper/Spigot

Официальный ванильный сервер Minecraft **не поддерживает плагины**!

Вам необходимо перейти на **Paper** или **Spigot** сервер.

## Шаг 1: Установка Paper/Spigot

### Вариант A: Paper (рекомендуется)

1. Перейдите на https://papermc.io/downloads/paper
2. Выберите версию **1.21.1** (или совместимую с 1.21.10)
3. Скачайте файл `paper-1.21.1-xxx.jar`
4. Переименуйте его в `paper.jar` или `server.jar`
5. Замените текущий `server.jar` в папке `server/mcraft/`

### Вариант B: Spigot

1. Перейдите на https://getbukkit.org/download/spigot
2. Скачайте версию **1.21.1**
3. Замените `server.jar` на скачанный файл

## Шаг 2: Сборка плагина

### Установка Maven

**Windows:**
```powershell
# С Chocolatey
choco install maven

# Или скачайте с https://maven.apache.org/download.cgi
```

**Linux:**
```bash
sudo apt update
sudo apt install maven
```

**Mac:**
```bash
brew install maven
```

### Сборка

```bash
cd server/mcraft/plugins/ServerAuthShop
mvn clean package
```

После успешной сборки файл будет в:
```
target/ServerAuthShop-1.0.0.jar
```

## Шаг 3: Установка плагина

1. **Остановите сервер** (если запущен)
2. **Скопируйте JAR файл** в папку плагинов:
   ```bash
   # Windows
   copy target\ServerAuthShop-1.0.0.jar ..\..\plugins\
   
   # Linux/Mac
   cp target/ServerAuthShop-1.0.0.jar ../../plugins/
   ```

3. **Запустите сервер**
4. Плагин автоматически создаст папку `plugins/ServerAuthShop/` с данными

## Шаг 4: Проверка

1. Запустите сервер
2. В логах должно быть: `[ServerAuthShop] ServerAuthShop плагин включен!`
3. Подключитесь к серверу - должно открыться меню регистрации/входа

## Использование

### Команды:
- `/shop` - Открыть магазин
- `/coins` - Показать баланс монет

### Регистрация:
1. При первом подключении откроется меню
2. Нажмите "Регистрация" (изумрудный блок)
3. Введите логин в чат
4. Введите пароль в чат
5. Готово!

### Вход:
1. При подключении откроется меню входа
2. Нажмите "Вход" (алмазный блок)
3. Введите пароль в чат
4. Готово!

## Устранение неполадок

### Плагин не загружается

1. Проверьте версию Java:
   ```bash
   java -version
   # Должна быть 21 или выше
   ```

2. Проверьте версию сервера:
   - Должен быть Paper или Spigot, НЕ ванильный сервер

3. Проверьте логи:
   ```bash
   # Посмотрите последние строки лога
   tail -n 50 server/mcraft/logs/latest.log
   ```

### Ошибка компиляции

1. Убедитесь, что Maven установлен:
   ```bash
   mvn --version
   ```

2. Проверьте подключение к интернету (Maven скачивает зависимости)

3. Попробуйте очистить и пересобрать:
   ```bash
   mvn clean
   mvn package
   ```

### Игроки не могут зарегистрироваться

1. Проверьте права на запись в папку `plugins/ServerAuthShop/`
2. Проверьте логи сервера на наличие ошибок

## Структура файлов после установки

```
server/mcraft/
├── paper.jar (или server.jar)  ← Paper/Spigot сервер
├── plugins/
│   ├── ServerAuthShop-1.0.0.jar  ← Плагин
│   └── ServerAuthShop/
│       └── players.json  ← Данные игроков (создается автоматически)
└── ...
```

## Дополнительная информация

См. `README.md` для полной документации плагина.

