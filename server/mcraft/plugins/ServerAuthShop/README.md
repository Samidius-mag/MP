# ServerAuthShop - Плагин для Minecraft

Плагин для сервера Minecraft с системой регистрации, входа и магазином.

## Функции

### 1. Система регистрации и входа
- **UI меню** при подключении к серверу
- Кнопки: **Регистрация** и **Вход**
- При регистрации игрок придумывает логин и пароль
- Данные сохраняются в файл `players.json` (YAML формат)
- Хранение статистики: количество смертей и убийств

### 2. Магазин
- **UI меню магазина** с кнопками:
  - **Купить** - покупка блоков и ресурсов за монеты
  - **Продать** - продажа блоков и ресурсов за монеты
- Показ баланса монет в меню

### 3. Система монет
- Монеты начисляются за убийства монстров (10 монет)
- Монеты начисляются за убийства игроков (50 монет)
- Монеты хранятся в файле данных игрока

## Требования

- **Minecraft Server**: Paper или Spigot версии 1.21.x
- **Java**: 21 или выше
- **Maven**: для сборки плагина

## Установка

### Важно: Переход на Paper/Spigot

⚠️ **Официальный ванильный сервер Minecraft не поддерживает плагины!**

Вам нужно перейти на **Paper** или **Spigot**:

1. **Скачайте Paper** (рекомендуется):
   - Перейдите на https://papermc.io/downloads/paper
   - Скачайте версию 1.21.1 (или совместимую с 1.21.10)
   - Замените `server.jar` на `paper.jar`

2. **Или скачайте Spigot**:
   - Перейдите на https://getbukkit.org/download/spigot
   - Скачайте версию 1.21.1

### Сборка плагина

1. **Установите Maven** (если еще не установлен):
   ```bash
   # Windows (с Chocolatey)
   choco install maven
   
   # Linux/Mac
   sudo apt install maven  # Ubuntu/Debian
   brew install maven      # Mac
   ```

2. **Соберите плагин**:
   ```bash
   cd server/mcraft/plugins/ServerAuthShop
   mvn clean package
   ```

3. **Скопируйте JAR файл**:
   - После сборки файл будет в `target/ServerAuthShop-1.0.0.jar`
   - Скопируйте его в папку `server/mcraft/plugins/`

### Установка на сервер

1. Остановите сервер
2. Поместите `ServerAuthShop-1.0.0.jar` в папку `plugins/`
3. Запустите сервер
4. Плагин создаст папку `plugins/ServerAuthShop/` с конфигурацией

## Использование

### Команды

- `/shop` - Открыть магазин
- `/coins` - Показать баланс монет

### Процесс регистрации

1. При первом подключении к серверу откроется меню с кнопками **Регистрация** и **Вход**
2. Нажмите **Регистрация** (изумрудный блок)
3. Введите логин в чат (3-16 символов)
4. Введите пароль в чат (минимум 4 символа)
5. Готово! Вы зарегистрированы

### Процесс входа

1. При подключении откроется меню входа
2. Нажмите **Вход** (алмазный блок)
3. Введите пароль в чат
4. Готово! Вы вошли в систему

### Магазин

1. Используйте команду `/shop`
2. Выберите **Купить** или **Продать**
3. Нажмите на предмет для покупки/продажи

**Доступные предметы для покупки:**
- Алмаз - 100 монет
- Железный слиток - 20 монет
- Золотой слиток - 30 монет
- Уголь - 5 монет
- Камень - 2 монеты
- Дубовое бревно - 3 монеты
- Хлеб - 5 монет
- Яблоко - 3 монеты

**Цены на продажу** (обычно в 2 раза меньше):
- Алмаз - 50 монет
- Железный слиток - 10 монет
- И т.д.

### Получение монет

- Убийство монстра: **+10 монет**
- Убийство игрока: **+50 монет**

## Структура данных

Данные игроков хранятся в файле:
```
plugins/ServerAuthShop/players.json
```

Формат данных (YAML):
```yaml
players:
  uuid-игрока:
    username: логин
    password: хеш-пароля (SHA-256)
    deaths: количество смертей
    kills: количество убийств
    coins: количество монет
```

## Настройка

Вы можете изменить цены в магазине, отредактировав файл:
```
src/main/java/com/serverauthshop/menu/ShopMenu.java
```

Найдите методы `buyPrices` и `sellPrices` и измените цены.

## Разработка

### Структура проекта

```
ServerAuthShop/
├── plugin.yml                    # Конфигурация плагина
├── pom.xml                       # Maven конфигурация
├── README.md                     # Этот файл
└── src/main/java/com/serverauthshop/
    ├── ServerAuthShop.java       # Главный класс плагина
    ├── data/
    │   └── PlayerDataManager.java # Управление данными игроков
    ├── menu/
    │   ├── AuthMenu.java         # Меню регистрации/входа
    │   └── ShopMenu.java         # Меню магазина
    └── economy/
        └── CoinManager.java      # Управление монетами
```

### Сборка для разработки

```bash
# Сборка
mvn clean package

# Установка на локальный сервер
cp target/ServerAuthShop-1.0.0.jar /path/to/server/plugins/
```

## Устранение неполадок

### Плагин не загружается

1. Проверьте версию Java: `java -version` (должна быть 21+)
2. Проверьте версию сервера (должен быть Paper/Spigot 1.21.x)
3. Проверьте логи: `logs/latest.log`

### Игроки не могут зарегистрироваться

1. Проверьте права на запись в папку `plugins/ServerAuthShop/`
2. Проверьте логи сервера

### Монеты не начисляются

1. Убедитесь, что игрок авторизован
2. Проверьте, что убийство было монстром (не животным)

## Лицензия

Этот плагин создан для использования на вашем сервере.

## Поддержка

При возникновении проблем проверьте:
1. Логи сервера: `logs/latest.log`
2. Логи плагина в консоли сервера
3. Версию Java и сервера

