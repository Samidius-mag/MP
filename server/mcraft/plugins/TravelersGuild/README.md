# TravelersGuild - Плагин Гильдии Путешественников

Плагин для Minecraft сервера, реализующий систему гильдии путешественников в стиле аниме с системой рангов, NPC-заведующим и управлением отрядами.

## Возможности

- ✅ Система рангов (C, B, A, S, SS) на основе убийств монстров
- ✅ NPC-заведующий гильдией с защитой от урона
- ✅ Автоматическое изменение цвета ника в зависимости от ранга
- ✅ Бегущие строки при входе игроков с рангами S и SS
- ✅ Салют и подарки для игроков с рангом SS
- ✅ Система отрядов (создание, вступление, роспуск)
- ✅ Меню взаимодействия с гильдией

## Система рангов

| Ранг | Название | Цвет ника | Требуется убийств |
|------|----------|-----------|-------------------|
| C | Новичок | Зеленый | 10 |
| B | Опытный | Синий | 100 |
| A | Мастер | Красный | 1000 |
| S | Герой | Золотой | 5000 |
| SS | Ультра Герой | Переливающийся | 10000+ |

### Особенности рангов

- **Ранг S**: При входе в игру показывается бегущая строка всем игрокам
- **Ранг SS**: 
  - Бегущая строка при входе
  - Салют из фейерверков
  - Подарки всем игрокам онлайн (3 золотых яблока)

## Установка

### Требования

- Minecraft сервер: **Paper** или **Spigot** версии 1.21.1+
- Java 21 или выше
- Maven (для сборки)

### Шаг 1: Сборка плагина

```bash
cd server/mcraft/plugins/TravelersGuild
mvn clean package
```

После успешной сборки файл будет в:
```
target/TravelersGuild-1.0.0.jar
```

### Шаг 2: Установка плагина

1. **Остановите сервер** (если запущен)
2. **Скопируйте JAR файл** в папку плагинов:
   ```bash
   # Windows
   copy target\TravelersGuild-1.0.0.jar ..\..\plugins\
   
   # Linux/Mac
   cp target/TravelersGuild-1.0.0.jar ../../plugins/
   ```
3. **Запустите сервер**
4. Плагин автоматически создаст папку `plugins/TravelersGuild/` с данными

### Шаг 3: Создание NPC-заведующего

После первого запуска сервера:

1. Подключитесь к серверу
2. Перейдите в место, где должен находиться NPC (например, в здании гильдии)
3. Выполните команду:
   ```
   /guildadmin spawn
   ```
4. NPC будет создан в вашей текущей локации

## Использование

### Команды

- `/guild` - Открыть меню гильдии
- `/guildadmin spawn` - Создать NPC-заведующего в текущей локации (требует прав администратора)
- `/guildadmin reload` - Перезагрузить данные гильдии (требует прав администратора)

### Регистрация в гильдии

1. Убейте минимум **10 монстров**
2. Подойдите к NPC-заведующему и нажмите ПКМ
3. Или используйте команду `/guild`
4. Нажмите на кнопку "Зарегистрироваться как Искатель Приключений"
5. После регистрации ваш ранг будет автоматически определен по количеству убийств

### Повышение ранга

Ранг повышается автоматически при достижении необходимого количества убийств монстров. Вы также можете вручную повысить ранг через меню гильдии, если у вас достаточно убийств.

### Управление отрядами

1. Откройте меню гильдии (`/guild`)
2. Нажмите на кнопку "Управление Отрядом"
3. Выберите действие:
   - **Создать Отряд** - создать новый отряд (вы станете лидером)
   - **Вступить в Отряд** - вступить в существующий отряд
   - **Покинуть Отряд** - покинуть текущий отряд

### Защита NPC

NPC-заведующий защищен от урона:
- При попытке атаковать NPC игрок **мгновенно умирает**
- Игрок получает **бан на 5 минут**
- NPC бессмертен и не может быть убит

## Структура файлов

```
TravelersGuild/
├── src/
│   └── main/
│       ├── java/
│       │   └── com/
│       │       └── travelersguild/
│       │           ├── TravelersGuild.java          # Основной класс плагина
│       │           ├── data/
│       │           │   ├── Rank.java               # Система рангов
│       │           │   └── GuildDataManager.java   # Менеджер данных
│       │           ├── npc/
│       │           │   └── GuildMasterNPC.java     # NPC-заведующий
│       │           ├── menu/
│       │           │   └── GuildMenu.java          # Меню взаимодействия
│       │           └── util/
│       │               ├── NameColorManager.java     # Управление цветом ников
│       │               └── AnnouncementManager.java # Объявления и эффекты
│       └── resources/
│           ├── plugin.yml                           # Конфигурация плагина
│           └── config.yml                           # Конфигурация настроек
├── pom.xml                                          # Maven конфигурация
└── README.md                                        # Документация
```

## Данные плагина

Все данные хранятся в файле:
```
plugins/TravelersGuild/guild_data.yml
```

Структура данных:
- Информация о зарегистрированных игроках
- Количество убийств монстров
- Ранги игроков
- Список отрядов и их участников

## Интеграция с архитектурой гильдии

Плагин предназначен для работы с построенной гильдией путешественников:

1. **Главный зал** - место для NPC-заведующего
2. **Библиотека-архив** - для хранения знаний о путешествиях
3. **Комната отдыха** - место для общения членов гильдии
4. **Склад снаряжения** - для хранения припасов
5. **Наблюдательная башня** - для обзора мира
6. **Внешний двор** - для собраний и мероприятий

## Разрешения

- `travelersguild.use` - Использовать гильдию (по умолчанию: все)
- `travelersguild.admin` - Административные права (по умолчанию: OP)
- `travelersguild.*` - Все права плагина (по умолчанию: OP)

## Устранение неполадок

### Плагин не загружается

1. Проверьте версию Java: `java -version` (должна быть 21+)
2. Проверьте версию сервера (должен быть Paper или Spigot)
3. Проверьте логи: `logs/latest.log`

### NPC не появляется

1. Убедитесь, что вы выполнили `/guildadmin spawn`
2. Проверьте, что локация указана в `config.yml`
3. Перезапустите сервер

### Цвет ника не меняется

1. Убедитесь, что вы зарегистрированы в гильдии
2. Проверьте, что у вас достаточно убийств для ранга
3. Попробуйте переподключиться к серверу

## Разработка

Для разработки плагина:

```bash
# Сборка
mvn clean package

# Установка в локальную папку плагинов
mvn clean package
cp target/TravelersGuild-1.0.0.jar /path/to/server/plugins/
```

## Лицензия

Этот плагин создан для использования на сервере Minecraft.

## Автор

TravelersGuild Team

