# Руководство по работе с консолью Minecraft сервера через PM2

## Проблема

Когда Minecraft сервер запущен через PM2, напрямую отправить команду в консоль сервера сложно, так как PM2 не поддерживает интерактивный ввод для дочерних процессов.

## Решения

### Способ 1: Через игру (Самый простой)

Если вы уже подключены к серверу, просто введите команду в чат игры:

```
/op Samidius
/guildadmin spawn
```

Это самый простой и надежный способ.

### Способ 2: Включить RCON (Рекомендуется)

RCON (Remote Console) - это протокол для удаленного управления сервером.

#### Шаг 1: Включите RCON в server.properties

Откройте файл `server/mcraft/server.properties` и добавьте/измените:

```properties
enable-rcon=true
rcon.port=25575
rcon.password=ваш_безопасный_пароль
```

#### Шаг 2: Перезапустите сервер

```bash
pm2 restart minecraft-server
```

#### Шаг 3: Установите mcrcon (если еще не установлен)

```bash
# Ubuntu/Debian
sudo apt-get install mcrcon

# Или скачайте с GitHub: https://github.com/Tiiffi/mcrcon
```

#### Шаг 4: Отправляйте команды через RCON

```bash
mcrcon -H localhost -P 25575 -p ваш_пароль "op Samidius"
mcrcon -H localhost -P 25575 -p ваш_пароль "say Привет всем!"
mcrcon -H localhost -P 25575 -p ваш_пароль "guildadmin spawn"
```

### Способ 3: Временно запустить сервер вручную

Если нужно отправить команду прямо сейчас:

```bash
# Остановите PM2 процесс
pm2 stop minecraft-server

# Запустите сервер вручную
cd server/mcraft
java -Xmx1024M -Xms1024M -jar server.jar nogui

# Теперь вы можете вводить команды напрямую в консоль
# После выполнения команды нажмите Ctrl+C для остановки
# Затем снова запустите через PM2:
pm2 start minecraft-server
```

### Способ 4: Просмотр логов

Для просмотра вывода сервера:

```bash
# Просмотр логов в реальном времени
pm2 logs minecraft-server

# Просмотр последних 100 строк
pm2 logs minecraft-server --lines 100

# Просмотр только ошибок
pm2 logs minecraft-server --err
```

### Способ 5: Создать веб-интерфейс (Продвинутый)

Можно создать простой веб-интерфейс для отправки команд через API. Это требует дополнительной разработки.

## Быстрые команды

### Выдать права администратора

**Через игру:**
```
/op ваш_ник
```

**Через RCON (если включен):**
```bash
mcrcon -H localhost -P 25575 -p пароль "op ваш_ник"
```

### Создать NPC гильдии

**Через игру (после получения прав):**
```
/guildadmin spawn
```

**Через RCON:**
```bash
mcrcon -H localhost -P 25575 -p пароль "guildadmin spawn"
```

## Рекомендации

1. **Для постоянного использования**: Включите RCON (Способ 2)
2. **Для разовых команд**: Используйте игру (Способ 1)
3. **Для отладки**: Временно запустите сервер вручную (Способ 3)

## Безопасность RCON

⚠️ **ВАЖНО**: RCON пароль передается в открытом виде. Используйте его только в защищенной сети или через SSH туннель.

Для безопасности:
- Используйте сложный пароль
- Ограничьте доступ к порту RCON через firewall
- Используйте SSH туннель для удаленного доступа

