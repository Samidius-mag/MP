# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–æ–≤

## üìä –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö Wildberries API

–ù–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞ –∏–∑ Wildberries API:

```json
{
  "date": "2025-10-14T10:08:27",
  "lastChangeDate": "2025-10-14T22:20:16", 
  "isCancel": false,
  "isSupply": false,
  "isRealization": true,
  "warehouseType": "–°–∫–ª–∞–¥ –ø—Ä–æ–¥–∞–≤—Ü–∞",
  "finishedPrice": 2635,
  "totalPrice": 4200,
  "spp": 37
}
```

## üéØ –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞:

1. **`isCancel: true`** ‚Üí `cancelled` (–û—Ç–º–µ–Ω–µ–Ω)
2. **`isRealization: true` + `warehouseType: "–°–∫–ª–∞–¥ –ø—Ä–æ–¥–∞–≤—Ü–∞"`** ‚Üí `in_assembly` (–ù–∞ —Å–±–æ—Ä–∫–µ)
3. **`isRealization: true` + `warehouseType: "–°–∫–ª–∞–¥ WB"`** ‚Üí `shipped` (–û—Ç–ø—Ä–∞–≤–ª–µ–Ω)
4. **`isRealization: true` + `warehouseType: "–°–∫–ª–∞–¥ WB (–¥–æ—Å—Ç–∞–≤–∫–∞)"`** ‚Üí `delivered` (–î–æ—Å—Ç–∞–≤–ª–µ–Ω)
5. **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é** ‚Üí `new` (–ù–æ–≤—ã–π)

### –ü—Ä–∏–º–µ—Ä –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–∫–∞–∑–∞:

–ó–∞–∫–∞–∑ —Å –¥–∞–Ω–Ω—ã–º–∏ –≤—ã—à–µ –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å **`in_assembly`** –ø–æ—Ç–æ–º—É —á—Ç–æ:
- ‚úÖ `isCancel: false` - –Ω–µ –æ—Ç–º–µ–Ω–µ–Ω
- ‚úÖ `isRealization: true` - –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ `warehouseType: "–°–∫–ª–∞–¥ –ø—Ä–æ–¥–∞–≤—Ü–∞"` - –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Å–∫–ª–∞–¥–µ –ø—Ä–æ–¥–∞–≤—Ü–∞
- ‚úÖ –ï—Å—Ç—å `sticker` - –∑–∞–∫–∞–∑ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è

## üîß –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `fetchWildberriesOrders` –≤ `server/routes/client.js`

```javascript
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö Wildberries API
let status = 'new';
if (order.isCancel) {
  status = 'cancelled';
} else if (order.isRealization && order.warehouseType === '–°–∫–ª–∞–¥ –ø—Ä–æ–¥–∞–≤—Ü–∞') {
  status = 'in_assembly'; // –ó–∞–∫–∞–∑ –Ω–∞ —Å–±–æ—Ä–∫–µ
} else if (order.isRealization && order.warehouseType === '–°–∫–ª–∞–¥ WB') {
  status = 'shipped'; // –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
} else if (order.isRealization && order.warehouseType === '–°–∫–ª–∞–¥ WB (–¥–æ—Å—Ç–∞–≤–∫–∞)') {
  status = 'delivered'; // –ó–∞–∫–∞–∑ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω
} else if (order.status) {
  // –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤ Wildberries –Ω–∞ –Ω–∞—à–∏
  const statusMap = {
    'new': 'new',
    'confirm': 'in_assembly',
    'cancel': 'cancelled',
    'delivered': 'delivered',
    'shipped': 'shipped'
  };
  status = statusMap[order.status] || 'new';
}
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `fetchWildberriesOrders` –≤ `server/routes/marketplace.js`

–î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –º–∞—Ä—à—Ä—É—Ç–∞–º–∏.

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

### –°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤ –±—É–¥—É—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

- **–ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã** (`new`) - —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã
- **–ù–∞ —Å–±–æ—Ä–∫–µ** (`in_assembly`) - –∑–∞–∫–∞–∑—ã –Ω–∞ —Å–∫–ª–∞–¥–µ –ø—Ä–æ–¥–∞–≤—Ü–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–û—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã** (`shipped`) - –∑–∞–∫–∞–∑—ã –Ω–∞ —Å–∫–ª–∞–¥–µ WB
- **–î–æ—Å—Ç–∞–≤–ª–µ–Ω—ã** (`delivered`) - –∑–∞–∫–∞–∑—ã –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –¥–æ—Å—Ç–∞–≤–∫–∏
- **–û—Ç–º–µ–Ω–µ–Ω—ã** (`cancelled`) - –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã

### –ù–∞ –¥–∞—à–±–æ—Ä–¥–µ –±—É–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

- üîµ **–ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã** - –∑–∞–∫–∞–∑—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- üü° **–ù–∞ —Å–±–æ—Ä–∫–µ** - –∑–∞–∫–∞–∑—ã –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–±–æ—Ä–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ –ø—Ä–æ–¥–∞–≤—Ü–∞
- üü¢ **–í –¥–æ—Å—Ç–∞–≤–∫–µ** - –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∏ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä** –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **–û—á–∏—Å—Ç–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): `./clean-orders.bat`
3. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∑–∞–∫–∞–∑—ã –∑–∞–Ω–æ–≤–æ** —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞—à–±–æ—Ä–¥** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:
```
Found 37 orders
Wildberries API response: [–∑–∞–∫–∞–∑—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏]
```

### –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è:
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `server/routes/client.js` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
- `server/routes/marketplace.js` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞
- `ORDERS_STATUS_LOGIC_UPDATE.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö Wildberries API, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∑–∞–∫–∞–∑–æ–≤.












