# –ì–∏–±–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∞–Ω–∏–π: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–µ–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –§–ù–°

## üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ª–æ–≥–∏–∫–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ë—ã–ª–æ (—Å—Ç—Ä–æ–≥–æ):
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ò–ù–ù —á–µ—Ä–µ–∑ API –§–ù–°
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ –º–æ–≥–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è

### –°—Ç–∞–ª–æ (–≥–∏–±–∫–æ):
- –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ò–ù–ù —á–µ—Ä–µ–∑ API –§–ù–°
- –ü—Ä–∏ –æ—à–∏–±–∫–µ/–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ - —Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–∞ –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ
- –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–º–∏ –∏ –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–º–∏ –∫–æ–º–ø–∞–Ω–∏—è–º–∏

## ‚úÖ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### Frontend (RegisterForm.tsx)

1. **–ì–∏–±–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∞–Ω–∏–∏:**
   ```typescript
   // –ü—Ä–∏ –æ—à–∏–±–∫–µ API —Å–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
   if (response.ok) {
     setCompanyData(result.data);
     toast.success('–ö–æ–º–ø–∞–Ω–∏—è –Ω–∞–π–¥–µ–Ω–∞ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞');
   } else {
     // –°–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
     setCompanyData({
       inn: innValue,
       name: `–ö–æ–º–ø–∞–Ω–∏—è —Å –ò–ù–ù ${innValue}`,
       form: innValue.length === 10 ? 'IP' : 'OOO',
       ogrn: '',
       status: '–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ –§–ù–°',
       reliability: { status: 'unknown', message: '–ö–æ–º–ø–∞–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –±–∞–∑–µ –§–ù–°' }
     });
     toast.warning('–ö–æ–º–ø–∞–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –§–ù–°, –Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–∞');
   }
   ```

2. **–£–±—Ä–∞–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:**
   ```typescript
   // –ï—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–∏, —Å–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—ã–µ
   if (!companyData) {
     setCompanyData({
       inn: data.inn,
       name: `–ö–æ–º–ø–∞–Ω–∏—è —Å –ò–ù–ù ${data.inn}`,
       form: data.inn.length === 10 ? 'IP' : 'OOO',
       ogrn: '',
       status: '–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ –§–ù–°',
       reliability: { status: 'unknown', message: '–ö–æ–º–ø–∞–Ω–∏—è –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ —á–µ—Ä–µ–∑ –§–ù–°' }
     });
   }
   ```

3. **–í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤:**
   - ‚úÖ **–ó–µ–ª–µ–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞** - –∫–æ–º–ø–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –≤ –§–ù–°
   - ‚ö†Ô∏è **–ñ–µ–ª—Ç–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞** - –∫–æ–º–ø–∞–Ω–∏—è –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –≤ –§–ù–°

### Backend (auth.js)

1. **–ì–∏–±–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –§–ù–°:**
   ```javascript
   // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ò–ù–ù —á–µ—Ä–µ–∑ API –§–ù–° (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
   let verifiedCompanyData = companyData;
   
   try {
     const innVerification = await verificationService.verifyINN(inn, companyData.form);
     if (innVerification.success) {
       verifiedCompanyData = innVerification.data;
     } else {
       console.warn('FNS verification failed, using provided data:', innVerification.error);
     }
   } catch (error) {
     console.warn('FNS API error, using provided data:', error.message);
   }
   ```

2. **–£–º–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
   ```javascript
   const fnsVerified = companyData.status && !companyData.status.includes('–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ');
   ```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- **–í—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è** - –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- **–ü–æ–Ω—è—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å** - –≤–∏–¥–Ω–æ, –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –ª–∏ –∫–æ–º–ø–∞–Ω–∏—è
- **–ë—ã—Å—Ç—Ä–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** - –Ω–µ –∂–¥–µ—Ç –æ—Ç–≤–µ—Ç–∞ –§–ù–° API

### –î–ª—è —Å–∏—Å—Ç–µ–º—ã:
- **–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ—è—Ö –§–ù–° API
- **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏
- **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - —á–µ—Ç–∫–æ –≤–∏–¥–Ω–æ —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏

## üìä –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –§–ù–°
```javascript
// –ü—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ API –§–ù–°
const response = await fetch('/api/auth/check-company', {
  method: 'POST',
  body: JSON.stringify({ inn })
});
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```javascript
if (response.ok) {
  // ‚úÖ –ö–æ–º–ø–∞–Ω–∏—è –Ω–∞–π–¥–µ–Ω–∞ - –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –§–ù–°
  setCompanyData(result.data);
} else {
  // ‚ö†Ô∏è –ö–æ–º–ø–∞–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ - —Å–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
  setCompanyData(createBasicCompanyData(inn));
}
```

### 3. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
```javascript
// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–∞ –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ
const fnsVerified = companyData.status && !companyData.status.includes('–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ');
await client.query(
  `INSERT INTO clients (..., fns_verified, ...) VALUES (..., $6, ...)`,
  [..., fnsVerified, ...]
);
```

## üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è (–∑–µ–ª–µ–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞):
```
‚úÖ –ö–æ–º–ø–∞–Ω–∏—è –Ω–∞–π–¥–µ–Ω–∞ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞
   –ù–∞–∑–≤–∞–Ω–∏–µ: –û–û–û "–ü—Ä–∏–º–µ—Ä"
   –§–æ—Ä–º–∞: –û–û–û
   –ò–ù–ù: 1234567890
   –û–ì–†–ù: 1234567890123
   –°—Ç–∞—Ç—É—Å: –î–µ–π—Å—Ç–≤—É—é—â–µ–µ
   –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å: –ö–æ–º–ø–∞–Ω–∏—è –ø—Ä–æ—à–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
```

### –ù–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è (–∂–µ–ª—Ç–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞):
```
‚ö† –ö–æ–º–ø–∞–Ω–∏—è –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –≤ –§–ù–°
   –ù–∞–∑–≤–∞–Ω–∏–µ: –ö–æ–º–ø–∞–Ω–∏—è —Å –ò–ù–ù 1234567890
   –§–æ—Ä–º–∞: –û–û–û
   –ò–ù–ù: 1234567890
   –û–ì–†–ù: –ù–µ —É–∫–∞–∑–∞–Ω
   –°—Ç–∞—Ç—É—Å: –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ –§–ù–°
   –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å: –ö–æ–º–ø–∞–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –±–∞–∑–µ –§–ù–°
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
```javascript
function createBasicCompanyData(inn) {
  return {
    inn: inn,
    name: `–ö–æ–º–ø–∞–Ω–∏—è —Å –ò–ù–ù ${inn}`,
    form: inn.length === 10 ? 'IP' : 'OOO',
    ogrn: '',
    status: '–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ –§–ù–°',
    reliability: {
      status: 'unknown',
      message: '–ö–æ–º–ø–∞–Ω–∏—è –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ —á–µ—Ä–µ–∑ –§–ù–°'
    }
  };
}
```

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:
```javascript
const fnsVerified = companyData.status && !companyData.status.includes('–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ');
```

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –£–ª—É—á—à–µ–Ω–∏—è:
- **100% –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** - –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- **–ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å —Å—Ç–∞—Ç—É—Å–∞** - –≤–∏–¥–Ω–æ, –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –ª–∏ –∫–æ–º–ø–∞–Ω–∏—è
- **–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å–±–æ—è–º** - —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –§–ù–° API
- **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–∞–Ω–Ω—ã–µ –§–ù–°
- **–ù–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–í—Å–µ –∫–æ–º–ø–∞–Ω–∏–∏** - –º–æ–≥—É—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É **"–ª—É—á—à–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å, —á–µ–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å"**:

1. ‚úÖ **–ü—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å** —á–µ—Ä–µ–∑ –§–ù–° API
2. ‚úÖ **–ü—Ä–∏ —É—Å–ø–µ—Ö–µ** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –§–ù–°
3. ‚úÖ **–ü—Ä–∏ –æ—à–∏–±–∫–µ** - —Å–æ–∑–¥–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
4. ‚úÖ **–í—Å–µ–≥–¥–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç** - –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
5. ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å** - –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ, –∞ —Å–∏—Å—Ç–µ–º–∞ —á–µ—Ç–∫–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã, –∞ –∫–∞–∫–∏–µ –Ω–µ—Ç!
