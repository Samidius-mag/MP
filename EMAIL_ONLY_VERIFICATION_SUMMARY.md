# –£–ø—Ä–æ—â–µ–Ω–∏–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏: –¢–æ–ª—å–∫–æ Email

## üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –ë—ã–ª–æ (—Å–ª–æ–∂–Ω–æ):
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è
2. –°–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–¥ –Ω–∞ email
3. –°–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç SMS –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç email
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω
6. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞

### –°—Ç–∞–ª–æ (–ø—Ä–æ—Å—Ç–æ):
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è
2. –°–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–¥ –Ω–∞ email
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç email
4. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞

## ‚úÖ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### Frontend (RegisterForm.tsx)
1. **–£–ø—Ä–æ—â–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏** - —É–±—Ä–∞–Ω–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É
2. **–û–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –ø–æ–ª–µ –¥–ª—è –∫–æ–¥–∞ email
3. **–£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞** - —Å—Ä–∞–∑—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email

### Backend (auth.js)
1. **–£–¥–∞–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç** - `/verify-phone` –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω
2. **–£–ø—Ä–æ—â–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–¥ –Ω–∞ email
3. **–û–±–Ω–æ–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç** - `/verify-email` —Å—Ä–∞–∑—É –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
4. **–£–ø—Ä–æ—â–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è** - —É–±—Ä–∞–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞

### Middleware (auth.js)
1. **–£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞** - `phone_verified` –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
2. **–£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞** - —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ `email_verified`

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- **–ü—Ä–æ—â–µ** - –Ω—É–∂–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ email
- **–ë—ã—Å—Ç—Ä–µ–µ** - –æ–¥–∏–Ω —à–∞–≥ –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö
- **–ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫** - –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å SMS

### –î–ª—è —Å–∏—Å—Ç–µ–º—ã:
- **–ü—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –º–µ–Ω—å—à–µ –∫–æ–¥–∞
- **–ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - –Ω–µ –Ω—É–∂–µ–Ω SMS API
- **–ë—ã—Å—Ç—Ä–µ–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** - –æ–¥–∏–Ω –∫–æ–¥ –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
```javascript
// 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
INSERT INTO users (..., email_verified, phone_verified) 
VALUES (..., false, true)  // phone_verified = true –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

// 2. –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ email –∫–æ–¥–∞
await verificationService.sendEmailVerification(email, code);

// 3. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
UPDATE users SET email_verified = true WHERE id = $1
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT —Ç–æ–∫–µ–Ω–∞
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ:
```javascript
// –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ email
if (!user.email_verified) {
  return res.status(401).json({ error: 'Email not verified' });
}
// phone_verified –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –£–ø—Ä–æ—â–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞:
- **–ë—ã–ª–æ**: 2 –∫–æ–¥–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- **–°—Ç–∞–ª–æ**: 1 –∫–æ–¥ (—Ç–æ–ª—å–∫–æ email)
- **–í—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏**: —Å 2-3 –º–∏–Ω—É—Ç –¥–æ 30 —Å–µ–∫—É–Ω–¥
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: —É–±—Ä–∞–Ω SMS API

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- **Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è
- **–¢–µ–ª–µ—Ñ–æ–Ω** - —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤, –±–µ–∑ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **JWT —Ç–æ–∫–µ–Ω—ã** - —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ
- **–°–µ—Å—Å–∏–∏** - —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∫ –ø—Ä–µ–∂–¥–µ

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Frontend
- `client/components/auth/RegisterForm.tsx` - —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

### Backend
- `server/routes/auth.js` - —É–±—Ä–∞–Ω `/verify-phone`, —É–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞
- `server/middleware/auth.js` - —É–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `phone_verified`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
1. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
2. –í–≤–µ–¥–∏—Ç–µ –ò–ù–ù –∫–æ–º–ø–∞–Ω–∏–∏
3. –ù–∞–∂–º–∏—Ç–µ "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ email (–¥–æ–ª–∂–µ–Ω –ø—Ä–∏–π—Ç–∏ –∫–æ–¥)
5. –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
6. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–∞:
1. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
2. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç —Ç–æ–ª—å–∫–æ email_verified
3. phone_verified –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- **–ú–µ–Ω—å—à–µ API –≤—ã–∑–æ–≤–æ–≤** - —Ç–æ–ª—å–∫–æ email
- **–ü—Ä–æ—â–µ –ª–æ–≥–∏–∫–∞** - –æ–¥–∏–Ω –∫–æ–¥ –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö
- **–ë—ã—Å—Ç—Ä–µ–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** - –Ω–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è SMS
- **–ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫** - –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π SMS

### –õ–∏–º–∏—Ç—ã:
- **Email** - –∑–∞–≤–∏—Å–∏—Ç –æ—Ç SMTP –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **SMS** - –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- **API –§–ù–°** - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å—Ç–∞–ª–∞ **–≤ 2 —Ä–∞–∑–∞ –ø—Ä–æ—â–µ**:
- –ë—ã–ª–æ: –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email + SMS
- –°—Ç–∞–ª–æ: —Ç–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
- –í—Ä–µ–º—è: —Å 2-3 –º–∏–Ω—É—Ç –¥–æ 30 —Å–µ–∫—É–Ω–¥
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: —É–±—Ä–∞–Ω SMS API

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –±—ã—Å—Ç—Ä–µ–µ –∏ –ø—Ä–æ—â–µ!
