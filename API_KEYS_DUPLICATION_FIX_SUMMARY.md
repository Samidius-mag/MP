# üîë –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö API

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö API –∫–ª—é—á–µ–π –≤ –ø–æ–ª–µ Wildberries –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è –ø–∞—Ä–æ–ª—å (–ª–æ–≥–∏–Ω) –≤–º–µ—Å—Ç–æ –ø—É—Å—Ç–æ–≥–æ –ø–æ–ª—è.

## üîç –ü—Ä–∏—á–∏–Ω–∞
–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ —Ç–æ–º, —á—Ç–æ:
1. **–í –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏—Å—å `apiKeys: user.api_keys`
2. **–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö API** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
3. **–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏** —Ñ–æ—Ä–º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–º–µ—Å—Ç–æ –ø—É—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å
**–§–∞–π–ª:** `server/routes/auth.js`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```javascript
// –ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
res.json({
  id: user.id,
  email: user.email,
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
  apiKeys: user.api_keys,  // ‚ùå –£–±—Ä–∞–Ω–æ
  createdAt: user.created_at
});

// –°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
res.json({
  id: user.id,
  email: user.email,
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
  createdAt: user.created_at
});
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:** –£–±—Ä–∞–ª–∏ `apiKeys` –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–º –¥–ª—è API –∫–ª—é—á–µ–π.

### 2. –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å
**–§–∞–π–ª:** `client/app/client/settings/page.tsx`

**–£–ª—É—á—à–µ–Ω–∏—è:**
1. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:**
```javascript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞–ª–∏—á–∏–µ –∫–ª—é—á–∞, –Ω–æ –∏ —á—Ç–æ –æ–Ω –Ω–µ –ø—É—Å—Ç–æ–π
wildberries: (keys.wildberries?.api_key && keys.wildberries.api_key.trim() !== '') 
  ? keys.wildberries 
  : defaultKeys.wildberries
```

2. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞:**
```javascript
console.log('Fetched API keys:', keys); // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
console.log('Merged API keys:', mergedKeys); // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü—Ä–æ–±–ª–µ–º–∞ —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π:
```javascript
// –ü—Ä–æ–±–ª–µ–º–∞: –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–ø–∞–¥–∞–ª–∏ –≤ API –∫–ª—é—á–∏
const user = { email: 'user@example.com', apiKeys: { wildberries: { api_key: 'user@example.com' } } };

// –†–µ—à–µ–Ω–∏–µ: –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è API –∫–ª—é—á–µ–π
GET /api/client/api-keys  // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ API –∫–ª—é—á–∏
GET /api/auth/profile     // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å –±–µ–∑ API –∫–ª—é—á–µ–π
```

### –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:
```javascript
// –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è)
wildberries: keys.wildberries?.api_key ? keys.wildberries : defaultKeys.wildberries

// –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è)
wildberries: (keys.wildberries?.api_key && keys.wildberries.api_key.trim() !== '') 
  ? keys.wildberries 
  : defaultKeys.wildberries
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **–ü–æ–ª–µ Wildberries:** `user@example.com` (–ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) ‚ùå
- **–ü—Ä–æ–±–ª–µ–º–∞:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### ‚úÖ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **–ü–æ–ª–µ Wildberries:** `` (–ø—É—Å—Ç–æ–µ –ø–æ–ª–µ) ‚úÖ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π

## üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
1. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ** –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–í–æ–π–¥–∏—Ç–µ** –≤ —Å–∏—Å—Ç–µ–º—É
3. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ** –≤ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "API –∫–ª—é—á–∏"
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** - –≤—Å–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—É—Å—Ç—ã–º–∏
5. **–í–≤–µ–¥–∏—Ç–µ** —Ç–µ—Å—Ç–æ–≤—ã–π API –∫–ª—é—á
6. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ** - –∫–ª—é—á –¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è

## üîÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞:
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö API –∫–ª—é—á–µ–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π
- –ü–æ–º–æ–≥–∞–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

### –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ (`trim() !== ''`)
- –ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è

---

**–ü—Ä–æ–±–ª–µ–º–∞ —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ä–æ–ª—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!** üéâ

–¢–µ–ø–µ—Ä—å:
- ‚úÖ **–ü–æ–ª—è API –∫–ª—é—á–µ–π** –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –ø—É—Å—Ç—ã–º–∏
- ‚úÖ **–ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** —Ñ–æ—Ä–º—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ **–û—Ç–¥–µ–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã** –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è –∏ API –∫–ª—é—á–µ–π




